<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style>
    </style>
    <meta charset="utf-8" />
    <title>Sarcasm</title>
</head>
<body>
	<div>
		<input id="text" />
	</div>
	<div id="sarcasm"></div>
</body>
</html>
<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script type="text/javascript">
	$(function() {
		sarcasm = [];
		icount = 2;
		ucount = 2;
		bcount = 2;
		console.log("ready");
		$("#text").keydown(function(event){
			event.preventDefault();
			if (event.keyCode >= 65 && event.keyCode <= 90){
				i = Math.floor((Math.random() * icount) + 1) % icount == 0;
				u = Math.floor((Math.random() * ucount) + 1) % ucount == 0;
				b = Math.floor((Math.random() * bcount) + 1) % bcount == 0;
				letter = event.key
				if (!i){
					icount = 2;
				} else icount += 1
				if (!u){
					ucount = 2;
				} else ucount += 1
				if (!b){
					bcount = 2;
				} else bcount += 1
				if (u) letter = letter.toUpperCase();
				sarcasm.push({key: letter, i: i, b: b});
				this.value += event.key
			}
			if (event.keyCode == 8){
				sarcasm.pop();
				this.value=this.value.slice(0, -1)
			}
			if (event.keyCode == 32){
				this.value += " ";
				sarcasm.push({key: " ", i: false});
			}
			printSarcasm(sarcasm);
		});
	});
	
	function printSarcasm(s){
		html = "";
		for (i=0;i<s.length;i++){
			u = s[i]
			temp = u.key
			if (u.i){
				temp = "<i>"+temp+"</i>"
			}
			if (u.b) {
				temp = "<b>"+temp+"</b>"
			}
			html += temp
		}
		$("#sarcasm").html(html)
	}
</script>